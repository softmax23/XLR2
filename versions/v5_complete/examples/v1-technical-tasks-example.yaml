# V1 Compatible Technical Tasks Example for V5 Testing
# This demonstrates all 4 technical task sections from V1

general_info:
    type_template: DYNAMIC
    xlr_folder: PFI/Y88_LoanIQ/OPS_RELEASE_TEST
    iua: NXY88
    appli_name: LoanIQ
    phases:
        - DEV
        - UAT
        - BENCH
        - PRODUCTION
    name_release: "NXY88_V5_TECHNICAL_TASKS_TEST"
    SUN_approuver: najib.chabbout@natixis.com
    technical_task_mode: string
    template_package_mode: string
    phase_mode: multi_list
    option_latest: false
    xld_group: true

# Technical tasks configuration - Complete V1 format
technical_task_list:
    before_deployment:
        - task_ops
        - task_ops
        - task_dba_other
    before_xldeploy:
        - task_ops
        - task_ops
    after_xldeploy:
        - task_ops
        - task_ops
        - task_dba_other
        - task_dba_factor
    after_deployment:
        - task_ops
        - task_ops
        - task_dba_factor

# Package definitions
template_liste_package:
    App:
        package_build_name: "LoanIQ_app_7.6.2.1.<version>"
        controlm_mode: master
        XLD_application_path: "Applications/PFI/Y88_LOANIQ/APP/Y88_APP_LOANIQ_76/"
        XLD_environment_path: "Environments/PFI/Y88_LOANIQ/7.6/<ENV>/<ENV>/<XLD_env>/APP/<xld_prefix_env>Y88_APP_<XLD_env>_ENV"
        auto_undeploy: false
        mode: CHECK_XLD

    Scripts:
        package_build_name: "PKG_SCRIPTS-V7.6-<version>"
        controlm_mode: master
        XLD_application_path: "Applications/PFI/Y88_LOANIQ/APP/Y88_SCR_LOANIQ/"
        XLD_environment_path: "Environments/PFI/Y88_LOANIQ/7.6/<ENV>/<ENV>/<XLD_env>/SCR/<xld_prefix_env>Y88_SCR_<XLD_env>_ENV"
        auto_undeploy: false
        mode: CHECK_XLD

# Jenkins configuration
jenkins:
    jenkinsServer: "Configuration/Custom/Jenkins-Y88"
    taskType: jenkins.Build
    username: apy88p_jenkins@company.com
    apiToken: ${apiToken_jenkins_iua}
    valueapiToken: "11a474dedca78e202f62f82c6544eb7778"
    password:
    jenkinsjob:
        App:
            jobName: "Y88/job/Projet_y88-loaniq-Package"
            parameters:
                - BRANCH_NAME=${App_version}
            precondition: None

        Scripts:
            jobName: "Y88/job/y88-loaniq-scripts-7.6-Pipeline"
            parameters:
                - BRANCH_NAME=${Scripts_version}
            precondition: None

# Environment configurations
XLD_ENV_DEV:
    - DEV_01
    - DEV_02

XLD_ENV_UAT:
    - UAT_01
    - UAT_02

XLD_ENV_BENCH:
    - MCO;Q
    - PRJ;B

XLD_ENV_PRODUCTION:
    - PRD_01

# Variable release configuration
variable_release:
    Date: true
    Version: true
    Environment: true

# Phase configurations with XLD deploy tasks
Phases:
    DEV:
        - seq_xldeploy:
            XLD App:
                - App
        - seq_xldeploy:
            XLD Scripts:
                - Scripts

    UAT:
        - seq_xldeploy:
            XLD App:
                - App
        - seq_xldeploy:
            XLD Scripts:
                - Scripts

    BENCH:
        - seq_xldeploy:
            XLD App:
                - App
        - seq_xldeploy:
            XLD Scripts:
                - Scripts
        - XLR_task_controlm_tasks:
                - Y88_FOLDER_APP-App
                - Y88_FOLDER_SCR-Scripts

    PRODUCTION:
        - seq_xldeploy:
            XLD App:
                - App
        - seq_xldeploy:
            XLD Scripts:
                - Scripts
        - XLR_task_controlm_tasks:
                - Y88_FOLDER_APP-App
                - Y88_FOLDER_SCR-Scripts